import React from 'react';
import { Link } from 'react-router-dom';
import { connect } from 'react-redux';
import SignIn from './SignIn';
import { logout } from './store';
import SearchBar from './SearchBar';
import Nav from 'react-bootstrap/Nav';
import Container from 'react-bootstrap/Container';
import Navbar from 'react-bootstrap/Navbar';
import NavDropdown from 'react-bootstrap/NavDropdown';

const NavBar = (props) => {
  const { auth, cart, logout, match, wishList } = props;
  const view = match.params.view;
  return (
    <nav className="navbar navbar-expand-lg bg-light sticky-top py-4">
      <div style={{}} className="container d-flex justify-content-between">
        <a className="navbar-brand" href="/">
          <svg
            width="334"
            height="27"
            viewBox="0 0 334 27"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16.6667 2.99967H14.0167C14 2.99967 14 2.99967 14 2.98301V0.333008H3.33335V2.98301C3.33335 2.99967 3.33335 2.99967 3.31669 2.99967H0.666687V10.9997H3.31669C3.33335 10.9997 3.33335 10.9997 3.33335 11.0163V13.6663H8.65002C8.66669 13.6663 8.66669 13.6663 8.66669 13.683V16.333H13.9834C14 16.333 14 16.333 14 16.3497V24.3163C14 24.333 14 24.333 13.9834 24.333H3.35002C3.33335 24.333 3.33335 24.333 3.33335 24.3163V18.9997H0.666687V24.333H3.31669C3.33335 24.333 3.33335 24.333 3.33335 24.3497V26.9997H14V24.3497C14 24.333 14 24.333 14.0167 24.333H16.6667V16.333H14.0167C14 16.333 14 16.333 14 16.3163V13.6663H8.68335C8.66669 13.6663 8.66669 13.6663 8.66669 13.6497V10.9997H3.35002C3.33335 10.9997 3.33335 10.9997 3.33335 10.983V3.01634C3.33335 2.99967 3.33335 2.99967 3.35002 2.99967H13.9834C14 2.99967 14 2.99967 14 3.01634V8.33301H16.6667V2.99967Z"
              fill="black"
            />
            <path
              d="M40.7838 5.66634H38.1338C38.1171 5.66634 38.1171 5.66634 38.1171 5.64968V2.99967H35.4671C35.4504 2.99967 35.4504 2.99967 35.4504 2.98301V0.333008H24.7838V2.98301C24.7838 2.99967 24.7838 2.99967 24.7671 2.99967H22.1171V5.64968C22.1171 5.66634 22.1171 5.66634 22.1004 5.66634H19.4504V21.6663H22.1004C22.1171 21.6663 22.1171 21.6663 22.1171 21.683V24.333H24.7671C24.7838 24.333 24.7838 24.333 24.7838 24.3497V26.9997H35.4504V24.3497C35.4504 24.333 35.4504 24.333 35.4671 24.333H38.1171V21.683C38.1171 21.6663 38.1171 21.6663 38.1338 21.6663H40.7838V5.66634ZM38.1171 5.68301V21.6497C38.1171 21.6663 38.1171 21.6663 38.1004 21.6663H35.4504V24.3163C35.4504 24.333 35.4504 24.333 35.4338 24.333H24.8004C24.7838 24.333 24.7838 24.333 24.7838 24.3163V21.6663H22.1338C22.1171 21.6663 22.1171 21.6663 22.1171 21.6497V5.68301C22.1171 5.66634 22.1171 5.66634 22.1338 5.66634H24.7838V3.01634C24.7838 2.99967 24.7838 2.99967 24.8004 2.99967H35.4338C35.4504 2.99967 35.4504 2.99967 35.4504 3.01634V5.66634H38.1004C38.1171 5.66634 38.1171 5.66634 38.1171 5.68301Z"
              fill="black"
            />
            <path
              d="M59.5467 0.333008V21.6497C59.5467 21.6663 59.5467 21.6663 59.53 21.6663H56.88V24.3163C56.88 24.333 56.88 24.333 56.8634 24.333H48.8967C48.88 24.333 48.88 24.333 48.88 24.3163V21.6663H46.23C46.2134 21.6663 46.2134 21.6663 46.2134 21.6497V0.333008H43.5467V21.6663H46.1967C46.2134 21.6663 46.2134 21.6663 46.2134 21.683V24.333H48.8634C48.88 24.333 48.88 24.333 48.88 24.3497V26.9997H56.88V24.3497C56.88 24.333 56.88 24.333 56.8967 24.333H59.5467V21.683C59.5467 21.6663 59.5467 21.6663 59.5634 21.6663H62.2134V0.333008H59.5467Z"
              fill="black"
            />
            <path
              d="M80.9867 2.99967H78.3367C78.32 2.99967 78.32 2.99967 78.32 2.98301V0.333008H64.9867V26.9997H67.6534V16.3497C67.6534 16.333 67.6534 16.333 67.67 16.333H72.97C72.9867 16.333 72.9867 16.333 72.9867 16.3497V18.9997H75.6367C75.6534 18.9997 75.6534 18.9997 75.6534 19.0163V24.333H78.3034C78.32 24.333 78.32 24.333 78.32 24.3497V26.9997H80.9867V24.333H78.3367C78.32 24.333 78.32 24.333 78.32 24.3163V18.9997H75.67C75.6534 18.9997 75.6534 18.9997 75.6534 18.983V16.3497C75.6534 16.333 75.6534 16.333 75.67 16.333H78.32V13.683C78.32 13.6663 78.32 13.6663 78.3367 13.6663H80.9867V2.99967ZM78.32 3.01634V13.6497C78.32 13.6663 78.32 13.6663 78.3034 13.6663H67.67C67.6534 13.6663 67.6534 13.6663 67.6534 13.6497V3.01634C67.6534 2.99967 67.6534 2.99967 67.67 2.99967H78.3034C78.32 2.99967 78.32 2.99967 78.32 3.01634Z"
              fill="black"
            />
            <path
              d="M102.437 8.33301H105.104V5.66634H102.454C102.437 5.66634 102.437 5.66634 102.437 5.64968V2.99967H99.7871C99.7704 2.99967 99.7704 2.99967 99.7704 2.98301V0.333008H89.1038V2.98301C89.1038 2.99967 89.1038 2.99967 89.0871 2.99967H86.4371V5.64968C86.4371 5.66634 86.4371 5.66634 86.4204 5.66634H83.7704V21.6663H86.4204C86.4371 21.6663 86.4371 21.6663 86.4371 21.683V24.333H89.0871C89.1038 24.333 89.1038 24.333 89.1038 24.3497V26.9997H99.7704V24.3497C99.7704 24.333 99.7704 24.333 99.7871 24.333H102.437V21.683C102.437 21.6663 102.437 21.6663 102.454 21.6663H105.104V18.9997H102.437V21.6497C102.437 21.6663 102.437 21.6663 102.42 21.6663H99.7704V24.3163C99.7704 24.333 99.7704 24.333 99.7538 24.333H89.1204C89.1038 24.333 89.1038 24.333 89.1038 24.3163V21.6663H86.4538C86.4371 21.6663 86.4371 21.6663 86.4371 21.6497V5.68301C86.4371 5.66634 86.4371 5.66634 86.4538 5.66634H89.1038V3.01634C89.1038 2.99967 89.1038 2.99967 89.1204 2.99967H99.7538C99.7704 2.99967 99.7704 2.99967 99.7704 3.01634V5.66634H102.42C102.437 5.66634 102.437 5.66634 102.437 5.68301V8.33301Z"
              fill="black"
            />
            <path
              d="M110.533 10.983V3.01634C110.533 2.99967 110.533 2.99967 110.55 2.99967H123.867V0.333008H107.867V26.9997H123.867V24.333H110.55C110.533 24.333 110.533 24.333 110.533 24.3163V13.683C110.533 13.6663 110.533 13.6663 110.55 13.6663H121.2V10.9997H110.55C110.533 10.9997 110.533 10.9997 110.533 10.983Z"
              fill="black"
            />
            <path
              d="M153.413 8.33301H156.08V5.66634H153.43C153.413 5.66634 153.413 5.66634 153.413 5.64968V2.99967H150.763C150.747 2.99967 150.747 2.99967 150.747 2.98301V0.333008H140.08V2.98301C140.08 2.99967 140.08 2.99967 140.063 2.99967H137.413V5.64968C137.413 5.66634 137.413 5.66634 137.397 5.66634H134.747V21.6663H137.397C137.413 21.6663 137.413 21.6663 137.413 21.683V24.333H140.063C140.08 24.333 140.08 24.333 140.08 24.3497V26.9997H150.747V24.3497C150.747 24.333 150.747 24.333 150.763 24.333H153.413V21.683C153.413 21.6663 153.413 21.6663 153.43 21.6663H156.08V18.9997H153.413V21.6497C153.413 21.6663 153.413 21.6663 153.397 21.6663H150.747V24.3163C150.747 24.333 150.747 24.333 150.73 24.333H140.097C140.08 24.333 140.08 24.333 140.08 24.3163V21.6663H137.43C137.413 21.6663 137.413 21.6663 137.413 21.6497V5.68301C137.413 5.66634 137.413 5.66634 137.43 5.66634H140.08V3.01634C140.08 2.99967 140.08 2.99967 140.097 2.99967H150.73C150.747 2.99967 150.747 2.99967 150.747 3.01634V5.66634H153.397C153.413 5.66634 153.413 5.66634 153.413 5.68301V8.33301Z"
              fill="black"
            />
            <path
              d="M180.176 5.66634H177.526C177.51 5.66634 177.51 5.66634 177.51 5.64968V2.99967H174.86C174.843 2.99967 174.843 2.99967 174.843 2.98301V0.333008H164.176V2.98301C164.176 2.99967 164.176 2.99967 164.16 2.99967H161.51V5.64968C161.51 5.66634 161.51 5.66634 161.493 5.66634H158.843V21.6663H161.493C161.51 21.6663 161.51 21.6663 161.51 21.683V24.333H164.16C164.176 24.333 164.176 24.333 164.176 24.3497V26.9997H174.843V24.3497C174.843 24.333 174.843 24.333 174.86 24.333H177.51V21.683C177.51 21.6663 177.51 21.6663 177.526 21.6663H180.176V5.66634ZM177.51 5.68301V21.6497C177.51 21.6663 177.51 21.6663 177.493 21.6663H174.843V24.3163C174.843 24.333 174.843 24.333 174.826 24.333H164.193C164.176 24.333 164.176 24.333 164.176 24.3163V21.6663H161.526C161.51 21.6663 161.51 21.6663 161.51 21.6497V5.68301C161.51 5.66634 161.51 5.66634 161.526 5.66634H164.176V3.01634C164.176 2.99967 164.176 2.99967 164.193 2.99967H174.826C174.843 2.99967 174.843 2.99967 174.843 3.01634V5.66634H177.493C177.51 5.66634 177.51 5.66634 177.51 5.68301Z"
              fill="black"
            />
            <path
              d="M201.606 5.66634H198.956C198.939 5.66634 198.939 5.66634 198.939 5.64968V2.99967H196.289C196.273 2.99967 196.273 2.99967 196.273 2.98301V0.333008H182.939V26.9997H196.273V24.3497C196.273 24.333 196.273 24.333 196.289 24.333H198.939V21.683C198.939 21.6663 198.939 21.6663 198.956 21.6663H201.606V5.66634ZM198.939 5.68301V21.6497C198.939 21.6663 198.939 21.6663 198.923 21.6663H196.273V24.3163C196.273 24.333 196.273 24.333 196.256 24.333H185.623C185.606 24.333 185.606 24.333 185.606 24.3163V3.01634C185.606 2.99967 185.606 2.99967 185.623 2.99967H196.256C196.273 2.99967 196.273 2.99967 196.273 3.01634V5.66634H198.923C198.939 5.66634 198.939 5.66634 198.939 5.68301Z"
              fill="black"
            />
            <path
              d="M207.046 10.983V3.01634C207.046 2.99967 207.046 2.99967 207.063 2.99967H220.379V0.333008H204.379V26.9997H220.379V24.333H207.063C207.046 24.333 207.046 24.333 207.046 24.3163V13.683C207.046 13.6663 207.046 13.6663 207.063 13.6663H217.713V10.9997H207.063C207.046 10.9997 207.046 10.9997 207.046 10.983Z"
              fill="black"
            />
            <path
              d="M247.259 2.99967H244.609C244.593 2.99967 244.593 2.99967 244.593 2.98301V0.333008H231.259V26.9997H244.593V24.3497C244.593 24.333 244.593 24.333 244.609 24.333H247.259V13.6663H244.609C244.593 13.6663 244.593 13.6663 244.593 13.6497V11.0163C244.593 10.9997 244.593 10.9997 244.609 10.9997H247.259V2.99967ZM244.593 3.01634V10.983C244.593 10.9997 244.593 10.9997 244.576 10.9997H233.943C233.926 10.9997 233.926 10.9997 233.926 10.983V3.01634C233.926 2.99967 233.926 2.99967 233.943 2.99967H244.576C244.593 2.99967 244.593 2.99967 244.593 3.01634ZM244.576 13.6663C244.593 13.6663 244.593 13.6663 244.593 13.683V24.3163C244.593 24.333 244.593 24.333 244.576 24.333H233.943C233.926 24.333 233.926 24.333 233.926 24.3163V13.683C233.926 13.6663 233.926 13.6663 233.943 13.6663H244.576Z"
              fill="black"
            />
            <path
              d="M271.376 5.66634H268.726C268.71 5.66634 268.71 5.66634 268.71 5.64968V2.99967H266.06C266.043 2.99967 266.043 2.99967 266.043 2.98301V0.333008H255.376V2.98301C255.376 2.99967 255.376 2.99967 255.36 2.99967H252.71V5.64968C252.71 5.66634 252.71 5.66634 252.693 5.66634H250.043V21.6663H252.693C252.71 21.6663 252.71 21.6663 252.71 21.683V24.333H255.36C255.376 24.333 255.376 24.333 255.376 24.3497V26.9997H266.043V24.3497C266.043 24.333 266.043 24.333 266.06 24.333H268.71V21.683C268.71 21.6663 268.71 21.6663 268.726 21.6663H271.376V5.66634ZM268.71 5.68301V21.6497C268.71 21.6663 268.71 21.6663 268.693 21.6663H266.043V24.3163C266.043 24.333 266.043 24.333 266.026 24.333H255.393C255.376 24.333 255.376 24.333 255.376 24.3163V21.6663H252.726C252.71 21.6663 252.71 21.6663 252.71 21.6497V5.68301C252.71 5.66634 252.71 5.66634 252.726 5.66634H255.376V3.01634C255.376 2.99967 255.376 2.99967 255.393 2.99967H266.026C266.043 2.99967 266.043 2.99967 266.043 3.01634V5.66634H268.693C268.71 5.66634 268.71 5.66634 268.71 5.68301Z"
              fill="black"
            />
            <path
              d="M295.473 5.66634H292.823C292.806 5.66634 292.806 5.66634 292.806 5.64968V2.99967H290.156C290.139 2.99967 290.139 2.99967 290.139 2.98301V0.333008H279.473V2.98301C279.473 2.99967 279.473 2.99967 279.456 2.99967H276.806V5.64968C276.806 5.66634 276.806 5.66634 276.789 5.66634H274.139V21.6663H276.789C276.806 21.6663 276.806 21.6663 276.806 21.683V24.333H279.456C279.473 24.333 279.473 24.333 279.473 24.3497V26.9997H290.139V24.3497C290.139 24.333 290.139 24.333 290.156 24.333H292.806V21.683C292.806 21.6663 292.806 21.6663 292.823 21.6663H295.473V5.66634ZM292.806 5.68301V21.6497C292.806 21.6663 292.806 21.6663 292.789 21.6663H290.139V24.3163C290.139 24.333 290.139 24.333 290.123 24.333H279.489C279.473 24.333 279.473 24.333 279.473 24.3163V21.6663H276.823C276.806 21.6663 276.806 21.6663 276.806 21.6497V5.68301C276.806 5.66634 276.806 5.66634 276.823 5.66634H279.473V3.01634C279.473 2.99967 279.473 2.99967 279.489 2.99967H290.123C290.139 2.99967 290.139 2.99967 290.139 3.01634V5.66634H292.789C292.806 5.66634 292.806 5.66634 292.806 5.68301Z"
              fill="black"
            />
            <path
              d="M303.569 16.3163V11.0163C303.569 10.9997 303.569 10.9997 303.585 10.9997H306.235V8.34967C306.235 8.33301 306.235 8.33301 306.252 8.33301H308.902V5.68301C308.902 5.66634 308.902 5.66634 308.919 5.66634H311.569V3.01634C311.569 2.99967 311.569 2.99967 311.585 2.99967H314.235V0.333008H311.569V2.98301C311.569 2.99967 311.569 2.99967 311.552 2.99967H308.902V5.64968C308.902 5.66634 308.902 5.66634 308.885 5.66634H306.235V8.31634C306.235 8.33301 306.235 8.33301 306.219 8.33301H303.569V10.983C303.569 10.9997 303.569 10.9997 303.552 10.9997H300.919C300.902 10.9997 300.902 10.9997 300.902 10.983V0.333008H298.235V26.9997H300.902V16.3497C300.902 16.333 300.902 16.333 300.919 16.333H303.552C303.569 16.333 303.569 16.333 303.569 16.3497V18.9997H306.219C306.235 18.9997 306.235 18.9997 306.235 19.0163V21.6663H308.885C308.902 21.6663 308.902 21.6663 308.902 21.683V24.333H311.552C311.569 24.333 311.569 24.333 311.569 24.3497V26.9997H314.235V24.333H311.585C311.569 24.333 311.569 24.333 311.569 24.3163V21.6663H308.919C308.902 21.6663 308.902 21.6663 308.902 21.6497V18.9997H306.252C306.235 18.9997 306.235 18.9997 306.235 18.983V16.333H303.585C303.569 16.333 303.569 16.333 303.569 16.3163Z"
              fill="black"
            />
            <path
              d="M333.019 2.99967H330.369C330.353 2.99967 330.353 2.99967 330.353 2.98301V0.333008H319.686V2.98301C319.686 2.99967 319.686 2.99967 319.669 2.99967H317.019V10.9997H319.669C319.686 10.9997 319.686 10.9997 319.686 11.0163V13.6663H325.003C325.019 13.6663 325.019 13.6663 325.019 13.683V16.333H330.336C330.353 16.333 330.353 16.333 330.353 16.3497V24.3163C330.353 24.333 330.353 24.333 330.336 24.333H319.703C319.686 24.333 319.686 24.333 319.686 24.3163V18.9997H317.019V24.333H319.669C319.686 24.333 319.686 24.333 319.686 24.3497V26.9997H330.353V24.3497C330.353 24.333 330.353 24.333 330.369 24.333H333.019V16.333H330.369C330.353 16.333 330.353 16.333 330.353 16.3163V13.6663H325.036C325.019 13.6663 325.019 13.6663 325.019 13.6497V10.9997H319.703C319.686 10.9997 319.686 10.9997 319.686 10.983V3.01634C319.686 2.99967 319.686 2.99967 319.703 2.99967H330.336C330.353 2.99967 330.353 2.99967 330.353 3.01634V8.33301H333.019V2.99967Z"
              fill="black"
            />
          </svg>
        </a>
        <button
          className="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span className="navbar-toggler-icon"></span>
        </button>
        <div
          className="collapse navbar-collapse justify-content-end"
          id="navbarNav"
          style={{}}
        >
          <ul className="navbar-nav" style={{ marginRight: '-1rem' }}>
            <li
              className="nav-item"
              // className={view === 'books' ? 'selected nav-item' : 'nav-item'}
            >
              <a
                className={
                  view === 'books'
                    ? 'nav-link nav-link-active'
                    : 'nav-link link-primary'
                }
                href="#books"
              >
                BOOKS
              </a>
            </li>
            <li className="nav-item">
              <a className="nav-link link-primary" href="">
                SEARCH
              </a>
            </li>
            {auth.id ? (
              <div className="collapse navbar-collapse" id="navbarNavDropdown">
                <ul className="navbar-nav">
                  <li className="nav-item dropdown bg-light">
                    <a
                      className="nav-link dropdown-toggle link-primary"
                      href="#"
                      role="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      ACCOUNT
                    </a>
                    <ul className="dropdown-menu dropdown-menu bg-light border-dark rounded-0">
                      <li>
                        <a
                          href="#user"
                          className={
                            view === 'user'
                              ? 'nav-link nav-link-active px-3'
                              : 'nav-link link-primary px-3'
                          }
                        >
                          {' '}
                          ACCOUNT&nbsp;DETAILS{' '}
                        </a>
                      </li>
                      <li>
                        <a
                          href="#wishList"
                          className={
                            view === 'wishList'
                              ? 'nav-link nav-link-active px-3'
                              : 'nav-link link-primary px-3'
                          }
                        >
                          {' '}
                          WISHLIST({wishList.length}){' '}
                        </a>
                      </li>
                      <li>
                        <a
                          href="#orderHistory"
                          className={
                            view === 'orderHistory'
                              ? 'nav-link nav-link-active px-3'
                              : 'nav-link link-primary px-3'
                          }
                        >
                          {' '}
                          ORDER HISTORY{' '}
                        </a>
                      </li>
                      {auth.isAdmin ? (
                        <li>
                          <hr className="dropdown-divider bg-dark" />
                          <a
                            href="#adminPrivileges"
                            className={
                              view === 'adminPrivileges'
                                ? 'nav-link nav-link-active px-3'
                                : 'nav-link link-primary px-3'
                            }
                          >
                            {' '}
                            ADMIN CONSOLE{' '}
                          </a>
                        </li>
                      ) : null}
                      <li>
                        <hr className="dropdown-divider bg-dark" />
                      </li>
                      <li>
                        <a
                          href="#"
                          className="nav-link link-primary px-3"
                          onClick={logout}
                        >
                          {' '}
                          LOGOUT{' '}
                        </a>
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
            ) : (
              <li className="nav-item">
                <a
                  href="#signIn"
                  className={
                    view === 'signIn'
                      ? 'nav-link nav-link-active'
                      : 'nav-link link-primary'
                  }
                >
                  LOGIN
                </a>
              </li>
            )}

            <li className="nav-item">
              <a
                href="#cart"
                className={
                  view === 'cart'
                    ? 'nav-link nav-link-active'
                    : 'nav-link link-primary'
                }
                style={{ paddingRight: '0 !important' }}
              >
                {auth.id
                  ? `CART (${cart.isCart ? cart.lineItems.length : 0})`
                  : !auth.id && localStorage.getItem('lineItem')
                  ? `CART (${
                      JSON.parse(localStorage.getItem('lineItem')).length
                    })`
                  : 'CART (0)'}
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  );
};

const mapDispatch = (dispatch, { history }) => {
  return {
    logout: () => dispatch(logout(history)),
  };
};

const mapStateToProps = (state) => {
  return state;
};

export default connect(mapStateToProps, mapDispatch)(NavBar);
